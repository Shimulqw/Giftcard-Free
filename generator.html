<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Generator</title>

<style>
  :root{
    --bg:#050507;
    --card-bg:#fff;
    --gold:#d6b15b;
    --muted:#bdbdbd;
    --success:#4caf50;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:var(--bg);
    font-family:Arial;
  }
  .card{
    width:92%;
    max-width:380px;
    background:#fff;
    padding:30px 25px;
    border-radius:22px;
    text-align:center;
    box-shadow:0 8px 22px rgba(0,0,0,0.45);
    position:relative;
  }
  h1{
    margin:0 0 20px;
    font-size:30px;
    letter-spacing:2px;
  }

  .progress-wrap{ position:relative; height:36px; margin:6px 0 18px; }
  .track{
    position:absolute; top:18px; left:12px; right:12px;
    height:8px; background:#eee; border-radius:10px;
  }
  .fill{
    position:absolute; top:18px; left:12px; height:8px;
    width:0%; background:var(--gold); border-radius:10px;
    transition:width .25s linear;
  }
  .dot{
    position:absolute; top:8px; width:18px; height:18px;
    border-radius:50%; background:#ddd; border:4px solid #eee;
    transform:translateX(-50%); transition:0.25s;
  }
  .dot.active{ background:var(--gold); transform:translateX(-50%) scale(1.1); }

  .status{ font-size:16px; color:#777; min-height:66px; }
  .code{
    margin-top:18px; font-size:22px; font-weight:700;
    opacity:0; transform:translateY(6px);
    transition:0.3s;
    letter-spacing:2px;
  }
  .code.show{ opacity:1; transform:translateY(0); }

  .blink{ animation:blink 0.7s infinite; }
  @keyframes blink{ 0%{opacity:1} 50%{opacity:0.2} 100%{opacity:1} }

  .verify{
    margin-top:20px; padding:12px 18px;
    background:#ff3b3b; color:#fff;
    border:none; border-radius:8px;
    font-size:18px; font-weight:700;
    cursor:pointer;
    opacity:0; transform:translateY(8px);
    transition:0.4s;
    box-shadow:0 6px 14px rgba(0,0,0,0.25);
    animation:pulse 1.4s infinite;
  }
  .verify.show{ opacity:1; transform:translateY(0); }

  @keyframes pulse{
    0%{ transform:scale(1); }
    50%{ transform:scale(1.06); }
    100%{ transform:scale(1); }
  }

  .extra{
    margin-top:12px;
    font-size:14px;
    color:#666;
  }
  .timer{ color:#e60000; font-weight:700; }

  /* iframe locker */
  #lockerFrame{
    width:100%;
    height:420px;
    border:none;
    margin-top:18px;
    display:none;
    border-radius:12px;
    overflow:hidden;
  }
</style>
</head>
<body>

<div class="card">
  <h1 id="title">CONNECTING</h1>

  <div class="progress-wrap">
    <div class="track"></div>
    <div class="fill" id="fill"></div>
    <div class="dot" id="dot1" style="left:12px"></div>
    <div class="dot" id="dot2" style="left:50%"></div>
    <div class="dot" id="dot3" style="left:calc(100% - 12px)"></div>
  </div>

  <div class="status">
    <div id="s1">Connecting to server...</div>
    <div id="s2" style="display:none">Connected</div>
    <div id="s3" style="display:none">Generating Key...</div>
    <div id="s4" style="display:none">Key Generated</div>
  </div>

  <div class="code" id="code">XXXX-XXXX-XXXX-XXXX</div>

  <button class="verify" id="verifyBtn">Unlock Full Key</button>

  <iframe id="lockerFrame"></iframe>

  <div class="extra">
    Attempts left: <b id="attempt">3</b><br>
    Key expires in <span class="timer" id="timer">02:59</span>
  </div>
</div>

<script>
/* Progress Timing */
const step = { a:2000, b:2200, c:1800, mid:600 };

const fill = document.getElementById("fill");
const dot1 = document.getElementById("dot1");
const dot2 = document.getElementById("dot2");
const dot3 = document.getElementById("dot3");
const s1=document.getElementById("s1");
const s2=document.getElementById("s2");
const s3=document.getElementById("s3");
const s4=document.getElementById("s4");
const code = document.getElementById("code");
const verify = document.getElementById("verifyBtn");
const iframe = document.getElementById("lockerFrame");

function randomKey(){
  const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let out="";
  for(let g=0;g<4;g++){
    if(g) out+="-";
    for(let x=0;x<4;x++){
      out+=c[Math.floor(Math.random()*c.length)];
    }
  }
  return out;
}

let keyInterval;

function animateFill(a,b,d){
  return new Promise(res=>{
    const start=performance.now();
    function frame(now){
      let t=Math.min(1,(now-start)/d);
      fill.style.width=(a+(b-a)*t)+"%";
      if(t<1) requestAnimationFrame(frame);
      else res();
    }
    requestAnimationFrame(frame);
  });
}

function wait(ms){ return new Promise(r=>setTimeout(r,ms)); }

/* MAIN SEQUENCE */
async function run(){
  keyInterval=setInterval(()=>{
    code.textContent=randomKey();
  },40);

  code.classList.add("show");
  dot1.classList.add("active");

  await animateFill(0,33,step.a);
  await wait(step.mid);

  s1.style.display="none";
  s2.style.display="block";
  dot2.classList.add("active");
  document.getElementById("title").textContent="GENERATING";

  await animateFill(33,66,step.b);
  await wait(step.mid);

  s3.style.display="block";

  await animateFill(66,100,step.c);
  await wait(300);

  s4.style.display="block";
  document.getElementById("title").textContent="COMPLETED";
  dot3.classList.add("active");

  clearInterval(keyInterval);

  let full = randomKey();
  let masked = full.slice(0,14) + "**";  
  code.innerHTML = masked + "<span class='blink'>**</span>";

  await wait(300);
  verify.classList.add("show");
}

run();

/* Timer */
let sec = 179;
setInterval(()=>{
  let m = Math.floor(sec/60);
  let s = sec%60;
  document.getElementById("timer").textContent =
      `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
  if(sec>0) sec--;
},1000);

/* Attempt + Iframe Locker */
let attempts = 3;
verify.addEventListener("click",()=>{

  attempts--;
  document.getElementById("attempt").textContent = attempts;

  /* === iframe locker open inside card === */
  iframe.src = "https://hubverify.com/cl/?o=6925248a5a19d";
  iframe.style.display = "block";

  verify.style.display="none";
});
</script>

</body>
</html>
